{"version":3,"sources":["../../libs/meal.js"],"names":["DomParser","require","request","Menu","canteen","date","items","MenuItem","createdAt","Date","Meal","callback","url","urlDetail","meal","error","response","body","statusCode","parser","parseFromString","newMeal","parseMeal","console","Info"],"mappings":";;;;;;;;;AAAA;;;;;;;;AAEA,IAAIA,YAAYC,QAAQ,YAAR,CAAhB;AACA,IAAIC,UAAUD,QAAQ,SAAR,CAAd;;IAEaE,I,WAAAA,I,GAET,cAAYC,OAAZ,EAAqBC,IAArB,EAA2B;AAAA;;AACvB,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,KAAL,GAAa,EAAb;AACH,C;;IAIQC,Q,WAAAA,Q,GAET,oBAAc;AAAA;;AACV,SAAKC,SAAL,GAAiB,IAAIC,IAAJ,EAAjB;AAEH,C;;IAIQC,I,WAAAA,I;;;AAET,oBAAc;AAAA;;AAAA;AAEb;;;;sCAEaC,Q,EAAU;;AAEpB,gBAAIC,MAAM,KAAKC,SAAf;AACA,gBAAIC,OAAO,IAAX;;AAEAZ,oBAAQU,GAAR,EAAa,UAAUG,KAAV,EAAiBC,QAAjB,EAA2BC,IAA3B,EAAiC;AAC1C,oBAAIF,KAAJ,EAAW;AACPJ,6BAASI,KAAT;AACH,iBAFD,MAEO;AACH,wBAAIC,SAASE,UAAT,KAAwB,GAA5B,EAAiC;AAC7B,4BAAIC,SAAS,mBAAW,IAAInB,SAAJ,GAAgBoB,eAAhB,CAAgCH,IAAhC,CAAX,EAAkDL,GAAlD,CAAb;AACA,4BAAIS,UAAUF,OAAOG,SAAP,CAAiBR,IAAjB,CAAd;AACAH,iCAAS,IAAT,EAAeU,OAAf;AACH,qBAJD,MAIO;AACHE,gCAAQR,KAAR,CAAc,yCAAd;AACH;AACJ;AACJ,aAZD;AAaH;;;;EAxBqBR,Q;;IA4BbiB,I,WAAAA,I;;;;;;;;;;EAAajB,Q","file":"meal.js","sourcesContent":["import {Parser} from \"./parser\";\n\nlet DomParser = require(\"dom-parser\");\nlet request = require(\"request\");\n\nexport class Menu {\n\n    constructor(canteen, date) {\n        this.canteen = canteen;\n        this.date = date;\n        this.items = [];\n    }\n\n}\n\nexport class MenuItem {\n\n    constructor() {\n        this.createdAt = new Date();\n\n    }\n\n}\n\nexport class Meal extends MenuItem {\n\n    constructor() {\n        super();\n    }\n\n    getMealDetail(callback) {\n\n        let url = this.urlDetail;\n        let meal = this;\n\n        request(url, function (error, response, body) {\n            if (error) {\n                callback(error)\n            } else {\n                if (response.statusCode === 200) {\n                    let parser = new Parser(new DomParser().parseFromString(body), url);\n                    let newMeal = parser.parseMeal(meal);\n                    callback(null, newMeal);\n                } else {\n                    console.error(\"Can not connect to StudentenWerk server\");\n                }\n            }\n        })\n    }\n\n}\n\nexport class Info extends MenuItem {\n\n}\n\n"]}